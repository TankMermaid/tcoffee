machine:
    java:
        version: oraclejdk8
dependencies:
  cache_directories:
    - /home/ubuntu/installbuilder-8.6.0
    - /home/ubuntu/ncbi-blast-2.2.28+
    - /home/ubuntu/repo
  pre:
    - sudo apt-get update --fix-missing && sudo apt-get install -y antiword make gcc gfortran bc wget curl unzip perl-modules libnet-ssleay-perl libcrypt-ssleay-perl libssl-dev libexpat1 libexpat1-dev liblwp-protocol-https-perl || true
    - sudo wget -q cpanmin.us -O /usr/local/bin/cpanm && sudo chmod +x /usr/local/bin/cpanm
    - sudo cpanm -n Net::SSLeay
    - sudo cpanm -n XML::Simple
    - sudo cpanm -n SOAP::Lite
    - bash build/install-installbuilder-8.6.0.sh
    - ln -s $HOME/installbuilder-8.6.0 $HOME/installbuilder
    - bash build/install-ncbi-blast-2.2.28+.sh
    - ln -s $HOME/ncbi-blast-2.2.28+ $HOME/ncbi-blast 
  override:
    - bash -x build/build.sh tcoffee :
        environment:
            OSNAME: linux
            OSARCH: x64
            WORKSPACE: /home/ubuntu
            PERL_MM_USE_DEFAULT: 1
            PERL_EXTUTILS_AUTOINSTALL: --defaultdeps
test:
  override:
    - bash build/build.sh doc_test :
        environment:
            OSNAME: linux
            OSARCH: x64
            WORKSPACE: /home/ubuntu
                  
            